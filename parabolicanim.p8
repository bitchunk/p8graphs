pico-8 cartridge // http://www.pico-8.com
version 42
__lua__
function _init()
start_x,start_y=32,80
target_x,target_y=96,80
duration=60
height=48
cnt=0
circ_radius=8
control=1
fpt={30,60,30}
cont={'\f4start','\f3target','\faheight','\fcduration','\feframerate'}
con=cont[1]
menut=cont
menu=false
poke(0x5f5c,12,2)
end

function upd()
if fpt[3] then
_set_fps(deli(fpt,3))
end

local tp=tonum(btnp(3))-tonum(btnp(2))
local lp=tonum(btnp(1))-tonum(btnp(0))
local t=tonum(btn(3))-tonum(btn(2))
local l=tonum(btn(1))-tonum(btn(0))

if btnp(4) or btnp(5) then
menu=not menu and menut
end
if menu then
	control+=tp
	control=(control-1)%#cont+1

	if control==4 then
		duration+=lp
		if lp~=0 then
			cnt=0
		end
		duration=mid(duration,0,0x7fff)
	elseif control==5 then
		if btnp(1) or btnp(0) then
			_set_fps(add(fpt,deli(fpt),1))
		end
	end
else
	if control==1 then
		start_x+=l
		start_y+=t
	elseif control==2 then
		target_x+=l
		target_y+=t
	elseif control==3 then
		height-=t+lp
	elseif control==4 then
		duration+=lp-tp*4
		if tp|lp~=0 then
			cnt=0
		end
		duration=mid(duration,0,0x7fff)
	elseif control==5 then
		if btnp(1) or btnp(0) or btnp(3) or btnp(2) then
			_set_fps(add(fpt,deli(fpt),1))
		end
	end
end

end

function _update60()
upd()
end

function _update()
upd()
end

function _draw()
	cls()
--	?control
--		?(((target_y-start_y)/2+start_y-height)..' '..target_y..' '..start_y)

	-- start --
	circ(start_x,start_y,circ_radius,4)
	-- target --
	circ(target_x,target_y,circ_radius,3)
	-- top height --
	local m=(target_y-start_y)/2+start_y-height
	local c=(target_x-start_x)/2+start_x
	circ(c,m,4,10)

	-- control print --
	if control==1 then
		?"‚¨ÜÔ∏è\n\+ae‚¨ÖÔ∏è ‚û°Ô∏è\n\|e‚¨áÔ∏è",start_x-3,start_y+circ_radius+2,4
	elseif control==2 then
		?"‚¨ÜÔ∏è\n\+ae‚¨ÖÔ∏è ‚û°Ô∏è\n\|e‚¨áÔ∏è",target_x-3,target_y+circ_radius+2,3
	elseif control==3 then
		?"‚¨ÜÔ∏è\n\+ae\n\|e‚¨áÔ∏è",c-3,m-circ_radius-10,10
	end

	-- parabolic sin
	local rate=cnt/duration
	local x=start_x+(target_x-start_x)*rate
	local y_linear=start_y+(target_y-start_y)*rate
	local y_sin=sin(rate/2)*height
	local y=y_linear+y_sin

	-- circle --
	color(cnt<duration/2 and 9 or 11)
	circfill(x,y,circ_radius)
	?"x:"..x,x,y-circ_radius-12
	?"y:"..y,x,y-circ_radius-6
	--
	
	cnt+=1
	if cnt>duration then
		cnt=0
	end

	local str=""
	str..="\f6time:"..cnt.."\n"
	if cont[control]=="\fcduration" then
		str..="\fc‚¨ÖÔ∏èduration:"..duration.."‚û°Ô∏è\n"
	else
		str..="\fcduration:"..duration.."\n"
	end
	if cont[control]=="\feframerate" then
		str..="\fe‚¨ÖÔ∏èfps:"..fpt[1].."‚û°Ô∏è \f6".."\n"
	else
		str..="\fefps:"..fpt[1].." \f6".."\n"
	end
	?str,1,108,6
	
	?"[parabolic curve anim]",40,120
	
	if menu then
		camera(-40)
		fillp(0x5a5a)
		rectfill(0,-1,-41,128,1)
		cursor(-38,2)
		for i,v in pairs(menu) do
			?(i==control and '\f7>' or '')..v
		end
		fillp(0)
		?"<< close-menu: üÖæÔ∏è",1,2,7
	else
		camera(0)
		?">> control-menu: üÖæÔ∏è",1,2,7
	end
end
-->8
--sample code

--[[
start_x,start_y=96,80
target_x,target_y=32,80
duration=60
height=48
cnt=0

while 1 do
	-- the rate between start & end(0~1)
	local rate=cnt/duration

	-- x-coordinate
	local x=start_x+(target_x-start_x)*rate

	-- y-coordinate of linear variation
	local y_linear=start_y+(target_y-start_y)*rate

	-- y-coordinate of sin variation
	local y_sin=sin(rate/2)*height

	-- y-coordinate of the two variants
	local y=y_linear+y_sin

	cls()
	circ(x,y,16,8)
	cnt+=1
	if cnt>duration then
		cnt=0
	end		
	flip()
end
]]


__gfx__
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00700700000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00077000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00077000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00700700000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
__label__
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
07000700000000770077077007770777007707000000077707770770070700000000007777700000000000000000000000000000000000000000000000000000
00700070000007000707070700700707070707000000077707000707070700700000077000770000000000000000000000000000000000000000000000000000
00070007000007000707070700700770070707000777070707700707070700000000077070770000000000000000000000000000000000000000000000000000
00700070000007000707070700700707070707000000070707000707070700700000077000770000000000000000000000000000000000000000000000000000
07000700000000770770070700700707077007770000070707770707007700000000007777700000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
000000000000000000000000000000000000000000000000000000000000000aaa00000000000000000000000000000000000000000000000000000000000000
0000000000000000000000000000000000000000000000000000000000000aa000aa00000000000000b0b00000bbb0bbb00000bb00bbb0bbb0bbb00000000000
0000000000000000000000000000000000000000000000000000000000000a00000a00000000000000b0b00b00b0b000b000000b0000b000b0b0b00000000000
000000000000000000000000000000000000000000000000000000000000a0000000a00000000000000b000000bbb0bbb000000b000bb0bbb0bbb00000000000
000000000000000000000000000000000000000000000000000000000000a0000000a0000000000000b0b00b00b0b0b00000000b0000b0b000b0b00000000000
000000000000000000000000000000000000000000000000000000000000a0000000a0000000000000b0b00000bbb0bbb00b00bbb0bbb0bbb0bbb00000000000
0000000000000000000000000000000000000000000000000000000000000a00000a000000000000000000000000000000000000000000000000000000000000
0000000000000000000000000000000000000000000000000000000000000aa000aa00000000000000b0b00000b0b0bbb00000bbb0bbb0bbb000000000000000
000000000000000000000000000000000000000000000000000000000000000aaa0000000000000000b0b00b00b0b0b0b0000000b0b0b000b000000000000000
0000000000000000000000000000000000000000000000000000000000000000000000000000000000bbb00000bbb0bbb0000000b0bbb0bbb000000000000000
000000000000000000000000000000000000000000000000000000000000000000000000000000000000b00b0000b000b0000000b000b0b00000000000000000
0000000000000000000000000000000000000000000000000000000000000000000000000000000000bbb0000000b000b00b0000b000b0bbb000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000bbbbb0000000000000000000000000000000000000000000
000000000000000000000000000000000000000000000000000000000000000000000000000000bbbbbbbbb00000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000bbbbbbbbbbb0000000000000000000000000000000000000000
0000000000000000000000000000000000000000000000000000000000000000000000000000bbbbbbbbbbbbb000000000000000000000000000000000000000
000000000000000000000000000000000000000000000000000000000000000000000000000bbbbbbbbbbbbbbb00000000000000000000000000000000000000
000000000000000000000000000000000000000000000000000000000000000000000000000bbbbbbbbbbbbbbb00000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000bbbbbbbbbbbbbbbbb0000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000bbbbbbbbbbbbbbbbb0000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000bbbbbbbbbbbbbbbbb0000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000bbbbbbbbbbbbbbbbb0000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000bbbbbbbbbbbbbbbbb0000000000000000000000000000000000000
000000000000000000000000000000000000000000000000000000000000000000000000000bbbbbbbbbbbbbbb00000000000000000000000000000000000000
000000000000000000000000000000000000000000000000000000000000000000000000000bbbbbbbbbbbbbbb00000000000000000000000000000000000000
0000000000000000000000000000000000000000000000000000000000000000000000000000bbbbbbbbbbbbb000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000bbbbbbbbbbb0000000000000000000000000000000000000000
000000000000000000000000000000000000000000000000000000000000000000000000000000bbbbbbbbb00000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000bbbbb0000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000044444000000000000000000000000000000000000000000000000000000000003333300000000000000000000000000000
00000000000000000000000000004400000440000000000000000000000000000000000000000000000000000000330000033000000000000000000000000000
00000000000000000000000000040000000004000000000000000000000000000000000000000000000000000003000000000300000000000000000000000000
00000000000000000000000000400000000000400000000000000000000000000000000000000000000000000030000000000030000000000000000000000000
00000000000000000000000004000000000000040000000000000000000000000000000000000000000000000300000000000003000000000000000000000000
00000000000000000000000004000000000000040000000000000000000000000000000000000000000000000300000000000003000000000000000000000000
00000000000000000000000040000000000000004000000000000000000000000000000000000000000000003000000000000000300000000000000000000000
00000000000000000000000040000000000000004000000000000000000000000000000000000000000000003000000000000000300000000000000000000000
00000000000000000000000040000000000000004000000000000000000000000000000000000000000000003000000000000000300000000000000000000000
00000000000000000000000040000000000000004000000000000000000000000000000000000000000000003000000000000000300000000000000000000000
00000000000000000000000040000000000000004000000000000000000000000000000000000000000000003000000000000000300000000000000000000000
00000000000000000000000004000000000000040000000000000000000000000000000000000000000000000300000000000003000000000000000000000000
00000000000000000000000004000000000000040000000000000000000000000000000000000000000000000300000000000003000000000000000000000000
00000000000000000000000000400000000000400000000000000000000000000000000000000000000000000030000000000030000000000000000000000000
00000000000000000000000000040000000004000000000000000000000000000000000000000000000000000003000000000300000000000000000000000000
00000000000000000000000000004400000440000000000000000000000000000000000000000000000000000000330000033000000000000000000000000000
00000000000000000000000000000044444000000000000000000000000000000000000000000000000000000000003333300000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000044444000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000444044400000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000440004400000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000440004400000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000044444044444044444000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000444004400000440044400000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000440004400000440004400000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000444004400000440044400000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000044444044444044444000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000440004400000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000440004400000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000444044400000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000044444000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
06660666066606660000060606660000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00600060066606000060060606060000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00600060060606600000066606660000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00600060060606000060000606060000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00600666060606660000000606660000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
0cc00c0c0ccc0ccc0ccc0ccc00cc0cc000000c000ccc000000000000000000000000000000000000000000000000000000000000000000000000000000000000
0c0c0c0c0c0c0c0c00c000c00c0c0c0c00c00c000c0c000000000000000000000000000000000000000000000000000000000000000000000000000000000000
0c0c0c0c0cc00ccc00c000c00c0c0c0c00000ccc0c0c000000000000000000000000000000000000000000000000000000000000000000000000000000000000
0c0c0c0c0c0c0c0c00c000c00c0c0c0c00c00c0c0c0c000000000000000000000000000000000000000000000000000000000000000000000000000000000000
0ccc00cc0c0c0c0c00c00ccc0cc00c0c00000ccc0ccc000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
0eee0eee00ee00000eee0eee00000000000000006600666066606660666066600660600066600660000006606060666060606660000066606600666066600660
0e000e0e0e0000e0000e0e0e00000000000000006000606060606060606060606060600006006000000060006060606060606000000060606060060066600060
0ee00eee0eee000000ee0e0e00000000000000006000666066606600666066006060600006006000000060006060660060606600000066606060060060600060
0e000e00000e00e0000e0e0e00000000000000006000600060606060606060606060600006006000000060006060606066606000000060606060060060600060
0e000e000ee000000eee0eee00000000000000006600600060606060606066606600666066600660000006600660606006006660000060606060666060600660
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000

